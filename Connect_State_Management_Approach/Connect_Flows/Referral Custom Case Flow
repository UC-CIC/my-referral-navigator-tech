{"Version":"2019-10-30","StartAction":"e0d861e1-9c0a-4b00-9bfe-b1d195fb0f78","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"09930292-e90a-4d60-9132-27410ae8f20c":{"position":{"x":1182.4,"y":469.6}},"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5":{"position":{"x":673.6,"y":583.2}},"e0d861e1-9c0a-4b00-9bfe-b1d195fb0f78":{"position":{"x":274.4,"y":114.4},"parameters":{"ProfileRequestData":{"IdentifierName":{"displayName":"Profile ID"}}},"useDynamic":{"IdentifierName":true},"customerProfilesAction":"GetCustomerProfile"},"16ced853-caf0-4a75-b638-d62477d37c91":{"position":{"x":793.6,"y":33.6},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"v1","useLexBotDropdown":true,"lexV2BotName":"CasesBlogSample"}}},"useLexBotDropdown":true,"lexV2BotName":"CasesBlogSample","lexV2BotAliasName":"v1","conditionMetadata":[{"id":"66b22453-67e8-477a-bdb2-3ccf3dbeca48","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"yes"},{"id":"97737364-68f6-4349-b623-a67744596405","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"no"}]},"4976d188-5be3-4b75-8707-394dfdb4972e":{"position":{"x":1753.6,"y":76.8}},"Get Latest Task":{"position":{"x":1180,"y":-56},"isFriendlyName":true,"parameters":{"CaseResponseFields":[{"displayName":"Case Id"},{"displayName":"Referral Category"},{"displayName":"Referral SMS"},{"displayName":"Referral Sub Category"},{"displayName":"Referral Task Description"}],"CaseRequestFields":{"customer_id":{"useDynamic":true}}},"action":"getCaseAction","requestFieldsOptions":{},"responseFieldsOptions":{"case_id":"Case Id","53464237-bfd1-430e-bcc7-f20c271c3679":"Referral Category","a2990300-f9ae-4f29-9a4b-efc7e8353b5e":"Referral SMS","5f334987-a346-4ba1-b941-254812a2ece3":"Referral Sub Category","5f45c3bd-c633-4b48-bdfc-43a9ddbb43b9":"Referral Task Description"}},"response":{"position":{"x":1478.4,"y":-137.6},"isFriendlyName":true}},"Annotations":[],"name":"Referral Custom Case Flow","description":"","type":"contactFlow","status":"PUBLISHED","hash":{}},"Actions":[{"Parameters":{},"Identifier":"09930292-e90a-4d60-9132-27410ae8f20c","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"I'm having some technical issues right now, please try again later."},"Identifier":"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5","Type":"MessageParticipant","Transitions":{"NextAction":"09930292-e90a-4d60-9132-27410ae8f20c","Errors":[{"NextAction":"09930292-e90a-4d60-9132-27410ae8f20c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ProfileRequestData":{"IdentifierName":"_profileId","IdentifierValue":"ab9b04795de2460e8da0a26c14e42626"},"ProfileResponseData":[]},"Identifier":"e0d861e1-9c0a-4b00-9bfe-b1d195fb0f78","Type":"GetCustomerProfile","Transitions":{"NextAction":"16ced853-caf0-4a75-b638-d62477d37c91","Errors":[{"NextAction":"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5","ErrorType":"NoMatchingError"},{"NextAction":"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5","ErrorType":"MultipleFoundError"},{"NextAction":"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5","ErrorType":"NoneFoundError"}]}},{"Parameters":{"Text":"Thanks for calling into UCDH Referral Center. Are you asking about an existing case?","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:767398012170:bot-alias/XVHIDAW4EA/S8ZPFETZ96"}},"Identifier":"16ced853-caf0-4a75-b638-d62477d37c91","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5","Conditions":[{"NextAction":"Get Latest Task","Condition":{"Operator":"Equals","Operands":["yes"]}},{"NextAction":"09930292-e90a-4d60-9132-27410ae8f20c","Condition":{"Operator":"Equals","Operands":["no"]}}],"Errors":[{"NextAction":"Get Latest Task","ErrorType":"NoMatchingCondition"},{"NextAction":"eb7fdf83-50e0-40bf-bfc5-3c29286d29f5","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"4976d188-5be3-4b75-8707-394dfdb4972e","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"LinkContactToCase":"true","GetLastUpdatedCase":"true","CaseResponseFields":["case_id","53464237-bfd1-430e-bcc7-f20c271c3679","a2990300-f9ae-4f29-9a4b-efc7e8353b5e","5f334987-a346-4ba1-b941-254812a2ece3","5f45c3bd-c633-4b48-bdfc-43a9ddbb43b9"],"CaseRequestFields":{"customer_id":"$.Customer.ProfileARN"}},"Identifier":"Get Latest Task","Type":"GetCase","Transitions":{"NextAction":"response","Errors":[{"NextAction":"response","ErrorType":"ContactNotLinked"},{"NextAction":"response","ErrorType":"MultipleFound"},{"NextAction":"response","ErrorType":"NoneFound"},{"NextAction":"09930292-e90a-4d60-9132-27410ae8f20c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"We have found your referral case.\n\nWe are currently working through the  $.Case.53464237-bfd1-430e-bcc7-f20c271c3679 phase\n\nWe see that this phase is currently $.Case.5f334987-a346-4ba1-b941-254812a2ece3\n\nPlease visit URL to find out more."},"Identifier":"response","Type":"MessageParticipant","Transitions":{"NextAction":"4976d188-5be3-4b75-8707-394dfdb4972e","Errors":[{"NextAction":"4976d188-5be3-4b75-8707-394dfdb4972e","ErrorType":"NoMatchingError"}]}}]}